---
sidebar_position: 2
---

# Protocol roles
Ecosystem participants include lenders, options sellers, options buyers, and liquidators.

import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<ThemedImage
  alt="Commissions"
  sources={{
    light: useBaseUrl('/img/user-roles.svg'),
    dark: useBaseUrl('/img/user-roles.svg'),
  }}
/>

## Lenders (Passive Liquidity Providers, PLPs)
Supply fungible liquidity to the options market. 
This liquidity will be lent out to the options traders to allow them to access trading on leverage. 
Funds can be supplied to Panoptic pools at any ratio.

**Typical users**: Retail, Institutions, DAOs.

<details>
<summary>How does liquidity providing work?</summary>
<ThemedImage
  alt="sellers"
  sources={{
    light: useBaseUrl('/img/OptionTradingDiagram-LP-2.svg'),
    dark: useBaseUrl('/img/OptionTradingDiagram-LP-2.svg'),
  }}
/>

Lenders provide liquidity to a Panoptic pool by making single-sided deposits of tokens into the option pool in any amount.

They will receive [ERC-20](https://ethereum.org/en/developers/docs/standards/tokens/erc-20/) shares for their deposited liquidity, and their portion of collateral inside the Panoptic pool will be tracked using a shares model from the [ERC-4626](https://ethereum.org/en/developers/docs/standards/tokens/erc-4626/) standard.

The role of lenders in Panoptic differs somewhat from that of LPs in Uniswap. Lenders do *not* deploy liquidity within a specific range of a Uniswap pool.

Rather, lenders generate yield by supplying tokens that can be deployed to a Uniswap pool by option sellers for a dynamic interest rate.

When a lender withdraws their liquidity from Panoptic, Panoptic will burn their collateral tokens and their funds are returned in the original token deposited, along with any accumulated interest payment. For example, if a lender deposits 1 ETH and earns an additional 0.1 ETH in interest, they can withdraw a total of 1.1 ETH. This withdrawal process ensures the lender receives their original contribution.
</details>


## Option Sellers
Sell options by borrowing liquidity at a dynamic interest rate and relocating it to a Uniswap pool. 
Sellers must deposit collateral and can sell options with notional values up to five times larger than their collateral balance.

**Typical users**: Pro-tail, Market makers, DAOs.

<details>
<summary>How does selling options work?</summary>
<ThemedImage
  alt="sellers"
  sources={{
    light: useBaseUrl('/img/OptionTradingDiagram-sell.svg'),
    dark: useBaseUrl('/img/OptionTradingDiagram-sell.svg'),
  }}
/>

Short options are minted by moving liquidity from Panoptic to the Uniswap pool.
Let us consider what happens when a user sells a single contract of an ETH-USDC PUT option at strike K=1000 and *width=10%*.

First, liquidity is moved from the Panoptic pool and deployed inside the ETH-USDC Uniswap pool in a range between (909, 1100).
If the price is above 1100, the position is minted out-the-money (OTM) and will consist entirely of 1000 USDC.
Since the position is initially OTM, it will not earn any fees. 

As the price decreases and falls within the position's range, the position will earn fees accrued every time a swap happens in the Uniswap pool.
If the price falls below 909, then the position is fully in-the-money (ITM) and the position will be entirely of 1 ETH. 

If the user chooses to close the position while it is ITM, then they need to "pay back" the 1000 USDC they "borrowed" and get to keep the 1 ETH of liquidity in the Uniswap pool.
In other words, the option seller is obligated to purchase 1 ETH for 1000 DAI, irrespective of the ETH price, but they get to keep the fees generated by that position during the time it was held.

If the user closes the position while it is OTM, then they simply ask the Panoptic pool to withdraw the 1000 USDC of liquidity from the Uniswap pool at no cost and they keep the collected fees as the option's premium.

A similar process happens when minting a K=2000 short call options: the Panoptic pool deploys 1 ETH in the Uniswap pool, the user has to "pay back" 1 ETH if the position is ITM and gets to keep the 2000 USDC (effectively selling 1 ETH for 2000 USDC regardless of the price of ETH). 
</details>


## Option Buyers
Buy options by moving liquidity out of the Uniswap pool back to the Panoptic smart contract.

Buyers also have to deposit collateral (10% of the notional value of the option) to cover the potential premium to be paid to the sellers.

**Typical users**: Retail, Institutions.


<details>
<summary>How does buying options work?</summary>
<ThemedImage
  alt="sellers"
  sources={{
    light: useBaseUrl('/img/OptionTradingDiagram-buy.svg'),
    dark: useBaseUrl('/img/OptionTradingDiagram-buy.svg'),
  }}
/>

Long options are minted by *removing* liquidity from the Uniswap pool and moving it back to the Panoptic pool.
While any option can be sold at any price at any time, users wishing to buy an option can only do it if it has been sold first.

Let us consider what happens if a user wants to buy a PUT option at price K=1000 and *width 10%* (basically buying the option that has been sold in the example above).
Buying this specific PUT option means that a fraction of the USDC liquidity deployed between (909, 1100) will be removed from the Uni v3 pool and moved back to the Panoptic Pool, and the price of that option will be the amount of fees that would have been collected had the liquidity remained there. 
If the price at the time the option was purchased is above 1100, the position is out-the-money (OTM) and will not accrue any premium.

If the price never enters the (909, 1100) range, then the position is a debt denominated in USDC and the option price will remain zero.
The user can choose to close their long PUT at any time and pay no premium.

If, on the other hand, the price falls below 1100, the position will start accumulating a premium.
If the price falls below 909, the position will become in-the-money (ITM) and will stop earning fees, so the option buyer can choose to exercise that option.
At exercise, the buyer has to "re-deploy" the liquidity that was borrowed, which is now a debt denominated in ETH. 
So the user has to send ETH to the Panoptic Pool and gets to keep the USDC that was received when deploying the long PUT option --effectively selling ETH at a price of 1000 USDC when the "market price" < 909. 

Once again, a similar process happens when buying a call at say 2000: the user will borrow 1 ETH and will have to pay 2000 USDC for it even though the market price could be much higher than 2000.
</details>


## Liquidators
Ensure the health of the protocol by liquidating accounts whose collateral balance falls below the margin requirements.
Liquidators will receive a [bonus](https://panoptic.xyz/docs/panoptic-protocol/liquidations#liquidation-bonus) proportional to:
1. The amount of funds necessary to cover the distressed positions
2. The distance between the strike and the current price
3. The in-the-money amount (intrinsic value)

**Typical users**: Pro-tail, Market makers, MEV seekers.

